<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf8" />
		<title>Duckdown in-browser test</title>
		<style type="text/css">
			
			* {
				box-sizing: border-box;
			}
			
			.book {
				padding: 2em;
				background-color: #EED;
				border: solid #AA3 1px;
				width: 100%;
			}
			
			.code {
				font-family: "Menlo", monospace;
				font-size: 1em;
			}
			
		</style>
	</head>
	<body>
		<h1>Duckdown in-browser test</h1>
		<p>Write some duckdown in here:</p>
		<textarea rows="10" cols="80" id="duckdowninput" class="book code">*Bold Text* ~Emphasised Text~ -Struck through text- _underlined text_</textarea>
		<h2>Output</h2>
		<div id="duckdownoutput" class="book"/>
		<script type="text/javascript" src="duckdown-unminified.js"></script>
		<script type="text/javascript">
			// Wait til we've loaded...
			window.addEventListener("load",function(eventData) {
				
				// Create our duckdown object
				var duckdownCompiler = new Duckdown();
				
				// Get the textarea we're dealing with...
				var textarea = document.querySelector("textarea");
				
				// And the region we're supposed to output to
				var outputArea = document.querySelector("div#duckdownoutput");
				
				function compileDuckdown() {
					console.log("Compiling duckdown...");
					
					var startTime = Date.now();
					
					// Get text
					var rawDuckdown = textarea.value;
					
					// Clear duckdown object...
					duckdownCompiler.clear();
					
					// Compile the duckdown!
					var compiledDuckdown = duckdownCompiler.compile(rawDuckdown);
					
					// Output it!
					outputArea.innerHTML = compiledDuckdown;
					
					console.log("Compilation took %d ms.",Date.now()-startTime);
				}
				
				// Ensure we're listening to all the main events
				textarea.addEventListener("keydown",compileDuckdown);
				textarea.addEventListener("keyup",compileDuckdown);
				textarea.addEventListener("change",compileDuckdown);
				
				// And  kick off our first compile!
				compileDuckdown();
			});
		</script>
	</body>
</html>